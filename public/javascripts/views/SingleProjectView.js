// Generated by CoffeeScript 1.3.3
(function() {

  (function(views) {
    views.SingleProjectView = Backbone.View.extend({
      tagName: 'tr',
      template: _.template($('#project-tmpl').text()),
      events: {
        'mouseover .menu-item': 'showControls',
        'mouseout .menu-item': 'hideControls',
        'click button.delete_link': 'deleteProject',
        'click button.edit_link': 'editProject',
        'keypress .edit': 'updateOnEnter'
      },
      initialize: function() {
        this.model.on('change', this.render, this);
        this.model.on('destroy', this.remove, this);
      },
      onClose: function() {
        this.model.off('change', this.render);
        this.model.off('destroy', this.reder);
      },
      showControls: function(e) {
        return $(e.currentTarget).find(".controls").show();
      },
      hideControls: function(e) {
        return $(e.currentTarget).find(".controls").hide();
      },
      deleteProject: function() {
        return this.model.clear();
      },
      editProject: function() {
        this.$el.addClass("editing");
        this.input.val(this.model.get('title'));
        this.input.focus;
      },
      updateOnEnter: function(e) {
        if (e.keyCode === 13) {
          this.close();
        }
      },
      close: function() {
        var value;
        value = this.input.val();
        if (!value) {
          this.clear();
        }
        this.model.save({
          title: value
        });
        this.$el.removeClass("editing");
      },
      clearInput: function(e) {
        var text;
        text = $.trim(this.input.val());
        if (text.toLocaleLowerCase() === "create new project") {
          return this.input.val("");
        }
      },
      render: function() {
        var html;
        html = this.template({
          project: this.model
        });
        $(this.el).html(html);
        this.input = this.$('.edit');
        return this;
      }
    });
  })(app.views);

}).call(this);
