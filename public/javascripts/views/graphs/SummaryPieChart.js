// Generated by CoffeeScript 1.3.3
(function() {

  (function(views) {
    views.SummaryPieChart = Backbone.View.extend({
      initialize: function() {
        var self;
        self = this;
        this.chart = new Highcharts.Chart({
          chart: {
            renderTo: self.options.el,
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            events: {
              load: self.fetchData(self.options.pieType)
            }
          },
          title: {
            text: self.options.title
          },
          plotOptions: {
            pie: {
              allowPointSelect: true,
              cursor: 'pointer',
              dataLabels: {
                enabled: false
              }
            }
          }
        });
      },
      render: function() {},
      fetchData: function(pieType) {
        var self, url;
        self = this;
        url = '/getPieSummary/' + pieType;
        $.ajax({
          url: url,
          success: function(res) {
            self.chart.addSeries(res["data"]);
          }
        });
      }
    });
  })(app.views);

}).call(this);
