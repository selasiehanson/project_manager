// Generated by CoffeeScript 1.3.3
(function() {

  (function(views, charts) {
    views.SummaryColumnChart = Backbone.View.extend({
      initialize: function() {
        var self;
        self = this;
        charts.SummaryColumnChart = new Highcharts.Chart({
          chart: {
            renderTo: 'big_graph_div',
            type: 'column',
            events: {
              load: self.fetchData
            }
          },
          title: {
            text: 'Projects Statistics'
          },
          subtitle: {
            text: ''
          },
          xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
          },
          yAxis: {
            min: 0,
            title: {
              text: 'Number'
            }
          },
          legend: {
            layout: 'vertical',
            backgroundColor: '#FFFFFF',
            align: 'left',
            verticalAlign: 'top',
            x: 100,
            y: 70,
            floating: true,
            shadow: true
          },
          plotOptions: {
            column: {
              pointPadding: 0.2,
              borderWidth: 0
            }
          }
        });
        return window.ch = this.chart;
      },
      render: function() {},
      fetchData: function() {
        var self;
        self = this;
        return $.ajax({
          url: '/getBigData',
          success: function(res) {
            var chart, data,
              _this = this;
            chart = charts.SummaryColumnChart;
            data = res["data"];
            _.each(data, function(d) {
              chart.addSeries(d);
            });
          },
          cache: false
        });
      }
    });
  })(app.views, app.charts);

}).call(this);
